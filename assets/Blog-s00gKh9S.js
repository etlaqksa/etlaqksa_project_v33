import{u as E,d as F,r as d,j as s,B,L as f}from"./index-eJX6DrDG.js";import{B as b}from"./badge-swxI4VqA.js";import{C as S,a as k,b as L,c as $,d as A}from"./card-Bj0Hn7gp.js";import{a as y,C as P,U}from"./articles-DKvVEI8v.js";import{S as T}from"./search-BrQBuso9.js";import{C as D}from"./calendar-Bv8hkLsY.js";function x(e){return e.replace(/```[\s\S]*?```/g," ").replace(/`[^`]*`/g," ").replace(/<[^>]*>/g," ").replace(/[#*_>\-]/g," ").replace(/\s+/g," ").trim()}function m(e){return e.replace(/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/g,"").replace(/\s+/g," ").trim()}function M(e,a){const r=x(e).split(/\s+/).filter(Boolean).length,n=Math.max(1,Math.round(r/(a==="ar"?170:220)));return a==="ar"?`${n} دقيقة`:`${n} min`}function j(e,a){const c=(a==="ar"?e.categoriesAr&&e.categoriesAr.length?e.categoriesAr:[e.category].filter(Boolean):e.categoriesEn&&e.categoriesEn.length?e.categoriesEn:[e.categoryEn].filter(Boolean))||[];return Array.from(new Set(c)).filter(Boolean)}function R(e){const a=["/article-images/BgIZ2EdQDXxT.webp","/article-images/N8at6vPLLTnL.webp","/article-images/hc80ziJxWYDl.webp","/article-images/S9hx4uBY7U5n.webp","/article-images/fjZxgrX7pS3N.webp","/article-images/bgeXnZzqGuIE.webp","/article-images/u66IptamGAlr.webp","/article-images/KDvxyzgE6fPZ.webp"],c=(e.categoryEn||e.category||"").toLowerCase();return c.includes("grout")||c.includes("حقن")?a[0]:c.includes("settlement")||c.includes("هبوط")?a[6]:c.includes("cavity")||c.includes("تكهفات")?a[2]:c.includes("crack")||c.includes("تشققات")?a[5]:c.includes("soil")||c.includes("تربة")?a[1]:a[e.id%a.length]}function I({article:e,language:a,onPickCategory:c}){const r=a==="ar"?e.title:m(e.titleEn||""),o=a==="ar"?e.content:m(e.contentEn||""),n=x(o).slice(0,220)+(x(o).length>220?"…":""),g=j(e,a),u=R(e),p=`/article-images/card/${e.slug}.webp`;return s.jsxs(S,{"data-loc":"client\\src\\pages\\Blog.tsx:83",className:"group h-full overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1 hover:scale-[1.07]",children:[s.jsx(f,{"data-loc":"client\\src\\pages\\Blog.tsx:84",href:`/blog/${e.slug}`,children:s.jsx("a",{"data-loc":"client\\src\\pages\\Blog.tsx:85",className:"block relative","aria-label":r,children:s.jsx("div",{"data-loc":"client\\src\\pages\\Blog.tsx:86",className:"aspect-[16/9] w-full bg-muted",children:s.jsx("img",{"data-loc":"client\\src\\pages\\Blog.tsx:87",src:p,alt:r,className:"w-full h-full object-cover",loading:"lazy",draggable:!1,onContextMenu:t=>t.preventDefault(),onError:t=>{t.currentTarget.src=u}})})})}),s.jsxs(k,{"data-loc":"client\\src\\pages\\Blog.tsx:92",className:"pb-3",children:[s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:93",className:"flex flex-wrap gap-2 mb-2",children:[g.slice(0,3).map(t=>s.jsx("button",{"data-loc":"client\\src\\pages\\Blog.tsx:95",type:"button",onClick:l=>{l.stopPropagation(),window.location.href=`/blog?cat=${encodeURIComponent(t)}`},className:"text-left","aria-label":a==="ar"?`تصفية حسب ${t}`:`Filter by ${t}`,children:s.jsx(b,{"data-loc":"client\\src\\pages\\Blog.tsx:105",variant:"secondary",className:"cursor-pointer hover:opacity-90",children:t})},t)),g.length>3&&s.jsxs(b,{"data-loc":"client\\src\\pages\\Blog.tsx:110",variant:"outline",children:["+",g.length-3]})]}),s.jsx(f,{"data-loc":"client\\src\\pages\\Blog.tsx:113",href:`/blog/${e.slug}`,children:s.jsx("a",{"data-loc":"client\\src\\pages\\Blog.tsx:114",className:"block",children:s.jsx(L,{"data-loc":"client\\src\\pages\\Blog.tsx:115",className:"leading-tight hover:underline",children:r||(a==="ar"?"مقال تقني":`${e.categoryEn||"Geotechnics"} Article #${e.id}`)})})}),s.jsx($,{"data-loc":"client\\src\\pages\\Blog.tsx:121",className:"mt-2",children:n||(a==="ar"?"تفاصيل المقال متاحة داخل الصفحة.":"Open the article to read the full English version.")})]}),s.jsxs(A,{"data-loc":"client\\src\\pages\\Blog.tsx:126",className:"pt-0",children:[s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:127",className:"flex items-center gap-4 text-sm text-muted-foreground mb-4",children:[s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:128",className:"flex items-center gap-1",children:[s.jsx(D,{"data-loc":"client\\src\\pages\\Blog.tsx:129",className:"h-4 w-4"}),s.jsx("span",{"data-loc":"client\\src\\pages\\Blog.tsx:130",children:e.date})]}),s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:132",className:"flex items-center gap-1",children:[s.jsx(P,{"data-loc":"client\\src\\pages\\Blog.tsx:133",className:"h-4 w-4"}),s.jsx("span",{"data-loc":"client\\src\\pages\\Blog.tsx:134",children:M(a==="ar"?e.content:e.contentEn||"",a)})]}),s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:136",className:"flex items-center gap-1",children:[s.jsx(U,{"data-loc":"client\\src\\pages\\Blog.tsx:137",className:"h-4 w-4"}),s.jsx("span",{"data-loc":"client\\src\\pages\\Blog.tsx:138",children:a==="ar"?"فريق إطلاق":"Etlaq Team"})]})]}),s.jsx(f,{"data-loc":"client\\src\\pages\\Blog.tsx:142",href:`/blog/${e.slug}`,children:s.jsx("a",{"data-loc":"client\\src\\pages\\Blog.tsx:143",className:"inline-flex items-center justify-center rounded-lg px-4 py-2 font-medium bg-primary text-primary-foreground hover:opacity-95 transition",children:a==="ar"?"اقرأ المزيد":"Read more"})})]})]})}function Y(){const{language:e}=E(),[,a]=F(),[c,r]=d.useState("all"),[o,n]=d.useState("");d.useEffect(()=>{const l=new URLSearchParams(window.location.search).get("cat");l&&r(l)},[]);const g=d.useMemo(()=>{const t=new Set;return y.forEach(l=>{j(l,e).forEach(h=>t.add(h))}),Array.from(t).sort((l,i)=>l.localeCompare(i))},[e]),u=d.useMemo(()=>{const t=o.trim().toLowerCase();return y.filter(l=>{const i=j(l,e),h=c==="all"?!0:i.includes(c),N=e==="ar"?l.title:m(l.titleEn||""),v=e==="ar"?l.content:m(l.contentEn||""),w=(N+" "+x(v)).toLowerCase(),C=t?w.includes(t):!0;return h&&C}).sort((l,i)=>l.date<i.date?1:-1)},[e,c,o]),p=t=>{r(t);const l=new URLSearchParams(window.location.search);l.set("cat",t),a(`/blog?${l.toString()}`,{replace:!0})};return s.jsx("div",{"data-loc":"client\\src\\pages\\Blog.tsx:208",className:"min-h-screen py-12",children:s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:209",className:"container mx-auto px-4",children:[s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:211",className:"text-center mb-8",children:[s.jsx("h1",{"data-loc":"client\\src\\pages\\Blog.tsx:212",className:"text-3xl font-bold mb-2",children:e==="ar"?"المقالات التقنية":"Technical Articles"}),s.jsx("p",{"data-loc":"client\\src\\pages\\Blog.tsx:213",className:"text-muted-foreground",children:e==="ar"?"مقالات هندسية مختصرة وعملية في الجيوتقنية وحقن التربة والأساسات.":"Practical engineering articles on geotechnics, grouting, soil and foundations."})]}),s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:221",className:"max-w-xl mx-auto mb-6 relative",children:[s.jsx(T,{"data-loc":"client\\src\\pages\\Blog.tsx:222",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx("input",{"data-loc":"client\\src\\pages\\Blog.tsx:223",type:"text",placeholder:e==="ar"?"ابحث عن مقال...":"Search articles...",value:o,onChange:t=>n(t.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border bg-background"})]}),s.jsxs("div",{"data-loc":"client\\src\\pages\\Blog.tsx:233",className:"flex flex-wrap justify-center gap-2 mb-8",children:[s.jsx(B,{"data-loc":"client\\src\\pages\\Blog.tsx:234",variant:c==="all"?"default":"outline",onClick:()=>r("all"),className:"h-9",children:e==="ar"?"الكل":"All"}),g.map(t=>s.jsx(B,{"data-loc":"client\\src\\pages\\Blog.tsx:242",variant:c===t?"default":"outline",onClick:()=>p(t),className:"h-9",children:t},t))]}),s.jsx("div",{"data-loc":"client\\src\\pages\\Blog.tsx:254",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(t=>s.jsx(I,{"data-loc":"client\\src\\pages\\Blog.tsx:256",article:t,language:e,onPickCategory:p},t.id))})]})})}export{Y as default};
